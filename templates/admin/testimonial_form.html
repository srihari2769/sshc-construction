{% extends "admin/base.html" %}

{% block page_title %}{{ 'Edit Testimonial' if testimonial else 'Add New Testimonial' }}{% endblock %}

{% block content %}
<div class="page-actions">
    <a href="{{ url_for('admin_testimonials') }}" class="btn btn-outline">
        <i class="fas fa-arrow-left"></i> Back to Testimonials
    </a>
</div>

<div class="form-container">
    <form method="POST" enctype="multipart/form-data" class="admin-form">
        <div class="form-row">
            <div class="form-group">
                <label for="client_name">Client Name *</label>
                <input type="text" id="client_name" name="client_name" value="{{ testimonial.client_name if testimonial else '' }}" required>
            </div>

            <div class="form-group">
                <label for="company">Company</label>
                <input type="text" id="company" name="company" value="{{ testimonial.company if testimonial else '' }}">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="rating">Rating *</label>
                <select id="rating" name="rating" required>
                    <option value="5" {{ 'selected' if testimonial and testimonial.rating == 5 else '' }}>5 Stars</option>
                    <option value="4" {{ 'selected' if testimonial and testimonial.rating == 4 else '' }}>4 Stars</option>
                    <option value="3" {{ 'selected' if testimonial and testimonial.rating == 3 else '' }}>3 Stars</option>
                    <option value="2" {{ 'selected' if testimonial and testimonial.rating == 2 else '' }}>2 Stars</option>
                    <option value="1" {{ 'selected' if testimonial and testimonial.rating == 1 else '' }}>1 Star</option>
                </select>
            </div>

            <div class="form-group">
                <label for="image">Client Photo (Optional)</label>
                <input type="file" id="image" name="image" accept="image/*">
                {% if testimonial and testimonial.image_url %}
                <p class="form-help">Current: <a href="{{ testimonial.image_url }}" target="_blank">View Image</a></p>
                {% endif %}
            </div>
        </div>

        <div class="form-group">
            <label for="content">Testimonial Content *</label>
            <textarea id="content" name="content" rows="6" required>{{ testimonial.content if testimonial else '' }}</textarea>
        </div>

        <div class="form-group">
            <label class="checkbox-label">
                <input type="checkbox" name="active" {{ 'checked' if not testimonial or testimonial.active else '' }}>
                <span>Active</span>
            </label>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> {{ 'Update Testimonial' if testimonial else 'Add Testimonial' }}
            </button>
            <a href="{{ url_for('admin_testimonials') }}" class="btn btn-outline">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
